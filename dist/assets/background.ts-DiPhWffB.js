function h(t){chrome.tabs.query({url:["https://www.youtube.com/*"]},i=>{i.forEach(r=>{r.id&&chrome.tabs.sendMessage(r.id,{type:t})})})}chrome.runtime.onMessage.addListener((t,i,r)=>(t==null?void 0:t.type)==="api_request"&&t.url?(fetch(t.url,t.init).then(async u=>{const o=await u.text();let c=o;try{c=o?JSON.parse(o):null}catch{c=o}r({ok:u.ok,status:u.status,body:c})}).catch(u=>{r({ok:!1,error:u.message})}),!0):(t==null?void 0:t.type)==="oauth_start"&&t.url?(chrome.identity.launchWebAuthFlow({url:t.url,interactive:!0},u=>{var o;if(chrome.runtime.lastError||!u){r({ok:!1,error:((o=chrome.runtime.lastError)==null?void 0:o.message)||"Auth failed"});return}chrome.tabs.create({url:u},()=>{r({ok:!0})})}),!0):(t==null?void 0:t.type)==="auth_complete"||(t==null?void 0:t.type)==="auth_signed_out"?(h(t.type),r({ok:!0}),!1):(r({ok:!1,error:"Unknown message"}),!1));
