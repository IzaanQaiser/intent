import"./modulepreload-polyfill-B5Qt9EMX.js";import{s as o}from"./supabaseClient-DihBYOwf.js";const c=document.getElementById("root");if(!c)throw new Error("Missing root element");const a=document.createElement("div");a.className="popup";c.appendChild(a);const s=document.createElement("div");s.className="popup__title";s.textContent="Intent";a.appendChild(s);const n=document.createElement("div");n.className="popup__status";a.appendChild(n);const t=document.createElement("button");t.className="popup__button";t.type="button";a.appendChild(t);async function l(){var i,r;const e=(r=(i=o)==null?void 0:i.auth)==null?void 0:r.storageKey;e&&await new Promise(d=>{chrome.storage.local.remove([e,`${e}-code-verifier`,`${e}-user`],()=>d())})}async function u(){if(!o){n.textContent="Missing Supabase configuration.",t.textContent="Unavailable",t.disabled=!0;return}const{data:e}=await o.auth.getSession();e.session?(n.textContent="Signed in.",t.textContent="Log out",t.disabled=!1):(n.textContent="Not signed in.",t.textContent="Sign in in-page",t.disabled=!0)}t.addEventListener("click",async()=>{if(!o)return;t.disabled=!0;const{error:e}=await o.auth.signOut({scope:"local"});e&&await l();try{chrome.runtime.sendMessage({type:"auth_signed_out"})}catch{}await u()});u();
