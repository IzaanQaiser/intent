import"./modulepreload-polyfill-B5Qt9EMX.js";import{s as a}from"./supabaseClient-DihBYOwf.js";const l=document.getElementById("root");if(!l)throw new Error("Missing root element");const r=document.createElement("div");r.className="popup";l.appendChild(r);const d=document.createElement("div");d.className="popup__header";r.appendChild(d);const u=document.createElement("div");u.className="popup__title";u.textContent="Intent";d.appendChild(u);const s=document.createElement("button");s.className="popup__gear";s.type="button";s.textContent="âš™";d.appendChild(s);const p=document.createElement("div");p.className="popup__actions";r.appendChild(p);const c=document.createElement("button");c.className="popup__button popup__button--secondary";c.type="button";c.textContent="My Dashboard";p.appendChild(c);const t=document.createElement("button");t.className="popup__button";t.type="button";p.appendChild(t);async function b(){var n,o;const e=(o=(n=a)==null?void 0:n.auth)==null?void 0:o.storageKey;e&&await new Promise(i=>{chrome.storage.local.remove([e,`${e}-code-verifier`,`${e}-user`],()=>i())})}async function m(){if(!a){t.textContent="Unavailable",t.disabled=!0;return}const{data:e}=await a.auth.getSession();e.session?(t.textContent="Log out",t.disabled=!1):(t.textContent="Sign in in-page",t.disabled=!0)}t.addEventListener("click",async()=>{if(!a)return;t.disabled=!0;const{error:e}=await a.auth.signOut({scope:"local"});e&&await b();try{chrome.runtime.sendMessage({type:"auth_signed_out"})}catch{}await m()});const h=e=>{var o,i;const n=(o=chrome.runtime)==null?void 0:o.getURL(e);if(n)try{(i=chrome.tabs)==null||i.create({url:n})}catch{window.open(n,"_blank")}};c.addEventListener("click",()=>h("index.html"));s.addEventListener("click",()=>h("settings.html"));m();
