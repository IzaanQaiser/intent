function i(r){chrome.tabs.query({url:["https://www.youtube.com/*"]},u=>{u.forEach(t=>{t.id&&chrome.tabs.sendMessage(t.id,{type:r})})})}chrome.runtime.onMessage.addListener((r,u,t)=>(r==null?void 0:r.type)==="oauth_start"&&r.url?(chrome.identity.launchWebAuthFlow({url:r.url,interactive:!0},o=>{var h;if(chrome.runtime.lastError||!o){t({ok:!1,error:((h=chrome.runtime.lastError)==null?void 0:h.message)||"Auth failed"});return}chrome.tabs.create({url:o},()=>{t({ok:!0})})}),!0):(r==null?void 0:r.type)==="auth_complete"||(r==null?void 0:r.type)==="auth_signed_out"?(i(r.type),t({ok:!0}),!1):(t({ok:!1,error:"Unknown message"}),!1));
